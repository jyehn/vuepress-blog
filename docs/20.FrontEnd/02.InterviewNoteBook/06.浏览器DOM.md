---
title: 浏览器DOM
date: 2022-03-20 12:19:52
permalink: /pages/2da1da/
categories:
  - FrontEnd
  - InterviewNoteBook
tags:
  - 
---

[[toc]]

# 浏览器DOM API

## 浏览器的多个标签页如何通信

- ServiceWorker

- SharedWorker

- localStorage

- BroadcastChaneel

# 如何实现文件下载

1. 通过FileReader实例的readAsArrayBuffer方法，获取文件的二进制数据

2. 使用Blob这个构造函数创建一个blob实例，结合URL.createObjectURL方法创建一个包含源内容的字符串

3. 创建一个a标签，将a标签的href属性指定为URLL.createObjectURL方法返回的字符串，download指定为文件名称

4. 调用a标签的click方法实现文件下载
代码如下
```html
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="ie=edge" http-equiv="X-UA-Compatible">
<title>Title</title>
</head>
<body>
<input id="file" name="img" type="file">
</body>
<script>
const element = document.querySelector('#file');
const fileReader = new FileReader()
element.addEventListener('change', () => {
   // 获取文件对象
   let file = element.files[0]
   // 获取文件对应的二进制数据
   fileReader.readAsArrayBuffer(file)
   fileReader.onload = () => {
       // 创建blob实例
       let blob = new Blob([fileReader.result], {
           type: file.type
       })
       // 创建包含源内容的字符串
       let url = URL.createObjectURL(blob)
       let a = document.createElement('a')
       a.href = url
       a.download = file.name
       // 下载文件
       a.click()
       // 删除这个包含源内容的字符串，因为该字符串与文档相关联，避免内存泄漏
       URL.revokeObjectURL(url)
   }
})
</script>
</html>

```